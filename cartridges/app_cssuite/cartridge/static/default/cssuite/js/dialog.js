var keepSessionInt,Dialog={addPayment:function(){CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)&&(CSSuite.info="Dialog.addPayment",jQuery.ajax({type:"POST",url:Order.addPaymentUrl,cache:!1,data:"",success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}}))},editPayment:function(){CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)&&(CSSuite.info="Dialog.editPayment",jQuery.ajax({type:"POST",url:Order.editPaymentUrl,cache:!1,data:"",success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}}))},togglePaymentMethod:function(){CSSuite.info="Dialog.togglePaymentMethod";var a=$("#addPayments").serialize(),b=$("#addPayments").attr("action");jQuery.ajax({type:"POST",url:b,cache:!1,data:a,success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){}})},addProductToShipments:function(a){if(CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)){CSSuite.info="Order.dialogProductToShipmentsUrl";var b="pid="+a;jQuery.ajax({type:"POST",url:Order.dialogProductToShipmentsUrl,cache:!1,data:b,success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}})}},showProduct:function(a){if(CSSuite.lockAction(CSSuite.LOCK_SCOPE_VIEW_PRODUCT)){CSSuite.info="Dialog.showProduct";var b="pid="+a;jQuery.ajax({type:"POST",url:Product.dialogShowProductUrl,cache:!1,data:b,success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_VIEW_PRODUCT)}})}},createShipment:function(){CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)&&(CSSuite.info="Dialog.createShipment",jQuery.ajax({type:"POST",url:Order.dialogCreateShipmentUrl,cache:!1,data:"",success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}}))},editShipment:function(a){if(CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)){CSSuite.info="Dialog.editShipment";var b="shipmentID="+a;jQuery.ajax({type:"POST",url:Order.dialogEditShipmentUrl,cache:!1,data:b,success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b),$("div.js-calendar").find(".datepicker").datePicker();var c=$("#shippingMethodsCS"),d=c.find(".formRowCS"),e=($("div.js-calendar"),d.find("input"));d.find("input.datepicker-display");$("#shippingMethodsCS").each(function(){var a=$(this),b=a.find(".formRowCS");b.each(function(){var a=$(this),b=a.find("div.js-calendar").length;b&&a.addClass("calen")})}),e.each(function(){"checked"===$(this).attr("checked")&&$(this).parents(".formRowCS").addClass("active"),$(this).on("click",function(){var a=$(this).parents(".formRowCS"),b=a.find("div.js-calendar").length;d.removeClass("active"),a.addClass("active"),b||$("#getDate").val("")})})},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}})}},deleteShipment:function(a){if(CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)){CSSuite.info="Dialog.deleteShipment";var b="shipmentID="+a;jQuery.ajax({type:"POST",url:Order.deleteShipmentUrl,cache:!1,data:b,success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}})}},editBillingAddress:function(){CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)&&(CSSuite.info="Dialog.editBillingAddress",jQuery.ajax({type:"POST",url:Order.editBillingAddressURL,cache:!1,data:"",success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}}))},saveOrder:function(){CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)&&(CSSuite.info="Dialog.saveOrder",jQuery.ajax({type:"POST",url:Order.saveOrderURL,cache:!1,data:"",success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}}))},cancelOrder:function(a){if(CSSuite.lockAction(CSSuite.LOCK_SCOPE_MODIFY_ORDER)){CSSuite.info="Dialog.cancelOrder";var b="orderno="+a;jQuery.ajax({type:"POST",url:Order.dialogCancelOrderUrl,cache:!1,data:b,success:function(a,b){$("#GeneralJQueryDialog").html(a),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_MODIFY_ORDER)}})}},orderOnBehalf:function(a,b,c){var d=$("#OrderOnBehalfDialog")[0],e=c?c:"Unregistered User";if(d){d.title="Agent: '"+b+"' logged in on behalf of '",d.title+=unescape(e)+"'";var f=screen.availWidth-85,g=screen.availHeight-200;d.innerHTML="<iframe src='"+a+"' width='"+f+"' height='"+g+"'  style='overflow: hidden; padding: 0; margin: 0;'/>",$("#OrderOnBehalfDialog").dialog({modal:!0,resizable:!1,draggable:!1,width:screen.availWidth-65,height:screen.availHeight-150,buttons:{Close:function(){Dialog.confirm("Please Confirm","Are you sure you want to close this window and lose all your changes?<br/>",function(){clearInterval(keepSessionInt),$("#OrderOnBehalfDialog").dialog("destroy")})}},open:function(){var a=$(this);$(this).parent().find(".ui-dialog-titlebar-close").unbind("click"),$(this).parent().find(".ui-dialog-titlebar-close").click(function(){return Dialog.confirm("Please Confirm","Are you sure you want to close this window and lose all your changes?<br/>",function(){clearInterval(keepSessionInt),a.dialog("destroy")}),!1}),keepSessionInt=setInterval('jQuery.ajax({type: "GET",cache: false,url: "'+CSSuite.sessionKeepAllive+'"});',9e5)},overlay:{opacity:.5,background:"black"}})}},viewOrderDetails:function(a){if(CSSuite.lockAction(CSSuite.LOCK_SCOPE_VIEW_ORDER_DETAILS)){CSSuite.info="Order.viewOrderDetails";var b="orderno="+a;jQuery.ajax({type:"POST",url:Order.immutableOrderDetailsURL,cache:!1,data:b,success:function(a,b){var c=$(a);c.find("a").each(function(a){$(this).attr("href","#")}),$("#GeneralJQueryDialog").html(c),CSSuite.debug(b)},error:handleError,complete:function(a,b){CSSuite.releaseActionLock(CSSuite.LOCK_SCOPE_VIEW_ORDER_DETAILS)}})}},confirm:function(a,b,c,d){var e=$("#GeneralJQueryDialog")[0];e&&(e.title=a,e.innerHTML=b,$("#GeneralJQueryDialog").dialog({modal:!0,resizable:!1,draggable:!1,width:"auto",height:"auto",buttons:{Apply:function(){c?c():function(){},$(this).dialog("destroy")},Cancel:function(){d?d():function(){},$(this).dialog("destroy")}},open:function(){var a=$(this);$(this).parent().find(".ui-dialog-titlebar-close").unbind("click"),$(this).parent().find(".ui-dialog-titlebar-close").click(function(){return a.dialog("destroy"),!1})},overlay:{opacity:.5,background:"black"}}))},message:function(a,b,c){var d=$("#GeneralJQueryDialog")[0];d&&(d.title=a,d.innerHTML=b,$("#GeneralJQueryDialog").dialog({modal:!0,resizable:!1,width:"auto",height:"auto",draggable:!1,buttons:{Close:function(){c?c():function(){},$(this).dialog("destroy")}},open:function(){var a=$(this);$(this).parent().find(".ui-dialog-titlebar-close").unbind("click"),$(this).parent().find(".ui-dialog-titlebar-close").click(function(){return a.dialog("destroy"),!1})},overlay:{opacity:.5,background:"black"},close:c?c:function(){}}))},errorMessage:function(a,b,c){var d=$("#GeneralJQueryDialog")[0];d&&(d.title=a,d.innerHTML=b,$("#GeneralJQueryDialog").dialog({modal:!0,resizable:!1,draggable:!1,buttons:{Ok:function(){$(this).dialog("destroy"),c?c():function(){}}},open:function(){var a=$(this);$(this).parent().find(".ui-dialog-titlebar-close").unbind("click"),$(this).parent().find(".ui-dialog-titlebar-close").click(function(){return a.dialog("destroy"),!1})},overlay:{opacity:.5,background:"black"},close:c?c:function(){}}))},formDialog:function(a,b,c,d,e,f,g,h){var i=$("#GeneralJQueryDialog")[0];i&&(i.title=unescape(a),$("#GeneralJQueryDialog").dialog({modal:!0,height:e,width:d,resizable:c,draggable:!1,maxWidth:f,maxHeight:g,buttons:b,close:h,open:function(){var a=$(this);$(this).parent().find(".ui-dialog-titlebar-close").unbind("click"),$(this).parent().find(".ui-dialog-titlebar-close").click(function(){return a.dialog("destroy"),!1})},overlay:{opacity:.5,background:"black"}}))}};