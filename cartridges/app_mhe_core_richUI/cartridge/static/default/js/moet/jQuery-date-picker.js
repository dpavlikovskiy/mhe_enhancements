Number.prototype.padLeft=function(a,b){var c=String(a||10).length-String(this).length+1;return c>0?new Array(c).join(b||"0")+this:this}(function(a){function b(b,c){this.$el=b,this.$parent=b.closest(".js-calendar"),this.options=a.extend({},this.defaults,c),this.init()}b.prototype={defaults:{dateDisplayClass:".datepicker-display",dateSelectClass:".datepicker-select",initalDate:!1},init:function(){this.$dateDisplay=this.$parent.find(this.options.dateDisplayClass),this.$dateSelect=this.$parent.find(this.options.dateSelectClass),this.disabledDays=this.$el.data("days-off").split(","),this.rangeStart=this.$el.data("range-start"),this.rangeEnd=this.$el.data("range-end"),this.cutoffHours=this.$el.data("cutoff-hours"),this.cutoffMins=this.$el.data("cutoff-mins"),this.enableSaturday=this.$el.data("sat-enable"),this.dateToday=new Date,this.startDate=new Date,this.endDate=new Date,this.cutoffPoint=new Date(this.dateToday.getFullYear(),this.dateToday.getMonth(),this.dateToday.getDate(),this.cutoffHours,this.cutoffMins,0),this.workingDays=this.rangeEnd-this.rangeStart,this.totalDays=0,this.endDate.setDate(this.endDate.getDate()+this.rangeEnd),this.hiddenField=this.options.hiddenField||a([]),this.setStartDate(this.options.initalDate?this.options.initalDate:this.dateToday,this.cutoffPoint),this.setEndDate(this.workingDays),this.initPicker(),this.addListeners();var b=this.hiddenField.val(),c=this.$el.parents("div.form-row").find("input[type=radio]");b.length&&c.is(":checked")&&this.setDisplayedValue(b)},setStartDate:function(a,b){var c=new Date,d=this.rangeStart;this.startDate.setDate(c.getDate()+d)},setEndDate:function(a){this.endDate},beforeShowDay:function(a){var b=a.getDay();return[6==b,""]},beforeShowDayForSatDelivery:function(a){var b=a.getDay();return[0!=b,""]},nationalDays:function(b){var c=b.getMonth(),d=b.getDate(),e=b.getFullYear();for(i=0;i<this.disabledDays.length;i++)if(-1!=a.inArray(c+1+"-"+d+"-"+e,this.disabledDays)||new Date>b)return[!1];return[!0]},setDisplayedValue:function(a){a&&(this.$dateDisplay.val(a).width(this.$dateDisplay.inputTextWidth()),this.$dateSelect.addClass("date-selected").text(this.$el.attr("data-change-date")))},initPicker:function(){function b(b){var c="";return c=null!=f.enableSaturday&&1==f.enableSaturday?f.beforeShowDay(b):a.datepicker.noWeekends(b),c[0]?f.nationalDays(b):c}function c(a){var b="";return b=f.beforeShowDayForSatDelivery(a),b[0]?f.nationalDays(a):b}function d(a){for(var b=new Date,d=0;a>0;)b.setDate(b.getDate()+1),d++,console.log(d),c(b)[0]&&(a--,console.log(a));return d}function e(a){for(var c=new Date,d=0;a>0;)c.setDate(c.getDate()+1),d++,b(c)[0]&&a--;return d}var f=this,g=new Date,h="";h=null!=f.enableSaturday&&1==f.enableSaturday?d(this.rangeStart):e(this.rangeStart),g.setDate(g.getDate()+h);var i=function(){return f.hiddenField.length?f.hiddenField.val():null}();this.$el.datepicker({beforeShow:function(b,c){a("#ui-datepicker-div").attr("data-title",a(b).attr("data-title")).attr("data-copy",a(b).attr("data-copy")).addClass("delivery-date")},beforeShowDay:b,showAnim:"fade",firstDay:app.resources.FIRSTDAY,altField:this.$dateDisplay,showOtherMonths:!0,selectOtherMonths:!0,minDate:g,maxDate:this.endDate,dateFormat:"dd MM yy",defaultDate:""!==i?i:null,onSelect:function(a,b){f.setDisplayedValue(a),f.hiddenField.val(a)}})},addListeners:function(){var b=this;this.$dateSelect.on("click",function(){if(a(this).closest(".form-row").hasClass("active")&&(b.$el.datepicker("show"),a(".ie8").length)){var c=8+(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop;a("#ui-datepicker-div").css("margin-top",String(c)+"px")}})}},a.fn.datePicker=function(c){return this.each(function(){a(this).data().datePicker=new b(a(this),c)})}}(jQuery));