function printFunc(){window.print()}$(document).ready(function(){window.checkoutCtrl={$deliveryDetails:$("#js-delivery-details"),$giftMessage:$("#js-gift-message"),$miniSummary:$("#miniSummary"),$paymentMethods:$("#paymentMethods"),$billingDetails:$("#billingDetails"),$summeryPage:$("#submitOrder"),$scrollTerms:$("#scrollTerms"),$registerForm:$("#register-form"),$chilledDate:$("#shipment_calendar_day"),init:function(){1===this.$deliveryDetails.length&&this.initDeliveryDetails(this.$deliveryDetails),1===this.$giftMessage.length&&this.initGiftMessage(this.$giftMessage),1===this.$miniSummary.length&&this.initMiniSummary(this.$miniSummary),1===this.$paymentMethods.length&&this.initPaymentMethods(this.$paymentMethods),1===this.$billingDetails.length&&this.initBillingDetails(this.$billingDetails),1===this.$summeryPage.length&&this.initSummeryPage(this.$summeryPage),1===this.$scrollTerms.length&&this.initScrollTerms(this.$scrollTerms),1===this.$registerForm.length&&this.initRegisterForm(this.$registerForm),1===this.$chilledDate.length&&this.initChilledDelivery(this.$chilledDate)},initChilledDelivery:function(a){setTimeout(function(){$(".chill_day span").html($("select#shipment_calendar_day :selected").html())},1e3);var b=$("#ship_method_custom").val(),c=$("#ship_method_startHour").val(),d=$("#ship_method_endHour").val(),e=$("#ship_method_timeSlot").val();$(document).on("change","select#shipment_calendar_day",function(a){var f=$("select#shipment_calendar_day :selected").val();$(".chill_day span").html($("select#shipment_calendar_day :selected").html()),$("#dwfrm_singleshipping_shippingAddress_requestedDeliveryDate").val(f),$.ajax({url:app.util.appendParamsToUrl(app.urls.getDeliveryTimeSlots,{date:f,shippingMethodID:b,starthour:c,endhour:d,timeslot:e}),context:document.body}).done(function(a){$("#shipment_calendar_time").replaceWith(a);var b=$("select#shipment_calendar_time :selected").text();$(".chill_time span").html(b),$(".chill_time>div").removeClass("form-row-valid"),$("#shipment_calendar_time").next().remove()}),$(document).on("change","select#shipment_calendar_time",function(a){var b=$("select#shipment_calendar_time :selected").val();$(".chill_time span").html(b),$("#dwfrm_singleshipping_shippingAddress_requestedDeliveryTimeSlot").val(b)})})},initDeliveryDetails:function(a){var b=a;b.find("select").uniform(),$(document).ajaxComplete(function(){b.find("select").uniform(),$(".pt_checkout").each(function(){$(".form-field-tooltip").each(function(){var a=$(this),b=a.find(".tooltip-content"),c=b.outerHeight();b.css("margin-top",-(c/2))})})})},initRegisterForm:function(a){a.find("select").uniform()},initGiftMessage:function(a){var b=a,c=b.find("textarea"),d=b.find(".cover");c.autosize(),b.find(".radioBox").each(function(){var a=$(this),b=a.find("input"),e=b.attr("checked"),f=b.attr("id");"checked"===e&&b.parents(".form-row").addClass("active"),"checked"===e&&"is-gift-yes"===f?d.hide():"checked"===e&&"is-gift-no"===f&&d.show(),b.on("click",function(){var a=$(this).attr("id");$(this).parents(".radioBox").addClass("active").siblings().removeClass("active"),"is-gift-yes"===a?(d.hide(),c.focus()):"is-gift-no"===a&&(d.show(),c.val(""))})})},initShippingMethods:function(){var a=$("#js-shipping-method-list"),b=$("input[name=dwfrm_singleshipping_shippingAddress_requestedDeliveryDate]"),c=a.find(".form-row"),d=$("div.js-calendar"),e=c.find("input"),f=c.find("input.datepicker-display");d.each(function(){$(this);$(this).find(".datepicker").datePicker({hiddenField:b})}),f.each(function(a){$(this).attr("name",$(this).attr("name")+a)}),app.validator.init(),e.each(function(){"checked"===$(this).attr("checked")&&$(this).parents(".form-row").addClass("active"),$(this).on("click",function(){var a=$(this).parents(".form-row");c.removeClass("active"),a.addClass("active")})})},initPaymentMethods:function(a){var b=a;b.find("select").uniform(),$(document).ajaxComplete(function(){$("#dwfrm_billing_paymentType").uniform(),b.find("select").uniform(),b.find(".checkPRButtons").each(function(){var a=$(this),b=a.find(".radioBox input"),c=a.find(".payPal input");b.on("click",function(){var a=$(this).attr("id");c.removeAttr("checked"),$("#is-CREDIT_CARD").trigger("click"),$(this).parents(".radioBox").addClass("active").siblings().removeClass("active"),"is-Amex"===a?($(".cvn").find("label span.fName").text("CVV2"),$(".cvn").find("input").attr("placeholder",app.resources.CVN2_PLACEHOLDER),$("#cvv").removeClass("showCVV").addClass("hiddenCVV"),$("#cv2").removeClass("hiddenCVV").addClass("showCVV"),$("input, textarea").placeholder()):"is-Visa"!==a&&"is-MasterCard"!==a||($(".cvn").find("label").text("CVV"),$(".cvn").find("input").attr("placeholder",app.resources.CVN_PLACEHOLDER),$("#cvv").removeClass("hiddenCVV").addClass("showCVV"),$("#cv2").removeClass("showCVV").addClass("hiddenCVV"),$("input, textarea").placeholder())}),c.on("click",function(){b.removeAttr("checked")})}),$("input#is-Amex").is(":checked")&&($(".cvn").find("label span.fName").text("CVV2"),$(".cvn").find("input").attr("placeholder",app.resources.CVN2_PLACEHOLDER),$("#cvv").removeClass("showCVV").addClass("hiddenCVV"),$("#cv2").removeClass("hiddenCVV").addClass("showCVV")),b.find(".input-text-pw").on("focus",function(){$(".cvn").find(".error").remove()}),$("#creaditcardForm .checkPRButtons").hasClass("singleview")&&$("#creaditcardForm .checkPRButtons").find(".radio-ui").css("display","none")}),b.find(".tooltip.left .tooltip-content").each(function(){var a=$(this),b=a.outerHeight();a.css("margin-top",-(b/2)-10)}),$("input#is-Amex").is(":checked")&&($(".cvn").find("label").text("CVV2"),$(".cvn").find("input").attr("placeholder",app.resources.CVN2_PLACEHOLDER),$("#cvv").removeClass("showCVV").addClass("hiddenCVV"),$("#cv2").removeClass("hiddenCVV").addClass("showCVV")),b.find(".checkPRButtons").each(function(){var a=$(this),b=a.find(".radioBox input"),c=a.find(".payPal input");b.on("click",function(){var a=$(this).attr("id");c.removeAttr("checked"),$("#is-CREDIT_CARD").trigger("click"),$(this).parents(".radioBox").addClass("active").siblings().removeClass("active"),"is-Amex"===a?($(".cvn").find("label span.fName").text("CVV2"),$(".cvn").find("input").attr("placeholder",app.resources.CVN2_PLACEHOLDER),$("#cvv").removeClass("showCVV").addClass("hiddenCVV"),$("#cv2").removeClass("hiddenCVV").addClass("showCVV"),$("input, textarea").placeholder()):"is-Visa"!==a&&"is-MasterCard"!==a||($(".cvn").find("label").text("CVV"),$(".cvn").find("input").attr("placeholder",app.resources.CVN_PLACEHOLDER),$("#cvv").removeClass("hiddenCVV").addClass("showCVV"),$("#cv2").removeClass("showCVV").addClass("hiddenCVV"),$("input, textarea").placeholder())}),c.on("click",function(){b.removeAttr("checked")})}),b.find(".input-text-pw").on("focus",function(){$(".cvn").find(".error").remove()})},initBillingDetails:function(a){var b=a;b.find("select").uniform(),$(document).ajaxComplete(function(){b.find("select").uniform()}),b.each(function(){var a=$("#checkMe"),b=a.text();if(a){var c=app.resources.ALLOWED_AMOUNT;$('label[for="dwfrm_billing_billingAddress_addressFields_vatNumber"]')&&$('label[for="dwfrm_billing_billingAddress_addressFields_vatNumber"]').css("line-height","1"),parseInt(b)>=parseInt(c)&&($('label[for="dwfrm_billing_billingAddress_addressFields_vatNumber"]').html("VAT Number"),$('label[for="dwfrm_billing_billingAddress_addressFields_vatNumber"]').css("line-height","30px"),$("#dwfrm_billing_billingAddress_addressFields_vatNumber").addClass("required"))}}),$("body").on("click","#dwfrm_billing_paymentMethods_creditCard_saveCard",function(){$(this).is(":checked")?($("#cc_div .optional").hide(),$("#dwfrm_billing_paymentMethods_creditCard_name").addClass("required"),$("#dwfrm_billing_paymentMethods_creditCard_name").parent().addClass("required")):($("#dwfrm_billing_paymentMethods_creditCard_name").removeClass("required"),$("#dwfrm_billing_paymentMethods_creditCard_name").parent().removeClass("required"),$("#cc_div .optional").show())})},initMiniSummary:function(a){var b=a,c=b.find(".mSummaryCont"),d=c.find("h4.showMini"),e=c.find(".nano");d.on("click",function(){$(this).hasClass("opened")?(e.slideUp(),$(this).removeClass("opened")):(e.slideDown(),$(this).addClass("opened"))})},initSummeryPage:function(a){var b=a;b.each(function(){var a=b.find(".submitOrderButton"),c=b.find(".acceptTerms input"),d=b.find("div.error");a.on("click",function(e){if(e.preventDefault(),"checked"!==c.attr("checked"))return d.slideDown(),!1;var f=$(this).data("html"),g=app.dialog.create({target:$("#waitIcon"),options:{width:500,height:"auto",title:this.title,open:function(){}}});$("#waitIcon").html(f).parents(".ui-dialog").addClass("waitIcon"),g.dialog("open"),a.submit(),c.on("click",function(){var a=b.find("div.error");a.slideUp()})})})},initScrollTerms:function(a){var b=$(a);b.find(".content");b.find(".nano").nanoScroller()}},checkoutCtrl.init(),$(".pt_checkout").each(function(){$(".form-field-tooltip").each(function(){var a=$(this),b=a.find(".tooltip-content"),c=b.outerHeight();b.css("margin-top",-(c/2))})}),$(".waitPopUp").on("click",function(a){var b=$(this).data("html"),c=app.dialog.create({target:$("#waitIcon"),options:{width:500,height:"auto",title:this.title,open:function(){}}});$("#waitIcon").html(b).parents(".ui-dialog").addClass("waitIcon"),c.dialog("open")})});