!function(a){function b(b,c){this.ele=b,this.opts=a.extend({},{gallery:a([])},c),this.cboxCursor=!1,this.index=0,this.galleryImages=[],this.ovWrapper=a("#cboxLoadedContent"),this.init()}b.prototype={init:function(){var b=this;a.extend(a.colorbox.settings,{close:"",scrolling:!1,opacity:.95}),this.ele.on("click","a.image-zoom",function(c){a(this).colorbox({href:b.ele.find("img.img-hero")[0].src,onComplete:function(){a("#colorbox").addClass("hide-buttons"),b.buildGallery()}}),c.preventDefault()}),a("#colorbox").on("click","#galleryNext",function(){return b.next(),!1}).on("click","#galleryPrev",function(){return b.prev(),!1})},buildGallery:function(){var b=this.opts.gallery.find("img"),c=b.length,d=this;c&&(a("#galleryNext, #galleryPrev").length||a("#cboxContent").append('<a id="galleryPrev" href="#" class="galleryBtn">&lt; <span><em></em>/'+c+'</span></a><a id="galleryNext" href="#" class="galleryBtn"><span><em></em>/'+c+"</span> &gt;</a>"),b.each(function(b){d.galleryImages[b]=a(this).data().lgimg.hires}),d.index=d.galleryImages.indexOf(d.getCurrentItem())),this.total=c,a("#galleryNext, #galleryPrev")[c?"show":"hide"](),this.countNext=a("#galleryNext").find("em"),this.countPrev=a("#galleryPrev").find("em"),this.updateCountDisplay()},getCurrentItem:function(){return a("#cboxLoadedContent").find("img.cboxPhoto").attr("src")},next:function(){var a=this.index++>=this.total-1?0:this.index;this.index=a,this.open(this.galleryImages[a])},prev:function(){var a=this.index--<=0?this.total-1:this.index;this.index=a,this.open(this.galleryImages[a])},open:function(b){a.colorbox({href:b}),app.pdpImageSwitcher&&app.pdpImageSwitcher.swapMainImage({url:b},this.opts.gallery.find("img")[this.index]),this.updateCountDisplay()},updateCountDisplay:function(){this.countPrev.add(this.countNext).text(this.index+1)}},a.fn.imageZoom=function(c){return a(this).each(function(){a(this).data().imageZoom=new b(a(this),c)})}}(jQuery);