!function(a){function b(b,c){this.ele=b,this.options=a.extend({},{},c),this.init()}b.prototype={initGlobals:function(){this.filters=this.ele.parent(),this.showFilters=a("#js-show-filters"),this.closeBtn=this.ele.find(".close"),this.clearBtn=this.ele.find(".clear"),this.bottleSizes=this.ele.find(".sizeDisplayValue"),this.totalSizes=this.bottleSizes.find("li").size(),this.bottlesColSplit=6,this.col1=this.bottleSizes,this.col2=null,this.iOS=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),this.touch=window.Modernizr.touch,this.isIE11=!!navigator.userAgent.match(/Trident.*rv\:11\./)},init:function(){this.ele.addClass("filters-init").wrap('<div class="filters-container" />'),this.initGlobals(),this.totalSizes>this.bottlesColSplit&&this.splitBottleSizesList(),this.getUrlParams().length>1&&this.openFilters(),this.filters.addClass("filters-transitions"),this.addListeners()},getUrlParams:function(){return window.location.href.slice(window.location.href.indexOf("?")+1).split("&")},openFilters:function(){this.filters.css("max-height",this.ele.outerHeight()+"px").addClass("filters-open"),this.showFilters.addClass("show-filters-active"),this.isIE11===!0&&this.filters.find(".refinement a").each(function(){var b=a(this).attr("href"),c=decodeURIComponent(b);a(this).attr("href",c)})},filterLinkDecode:function(){this.filters.find(".refinement a").each(function(){var b=a(this).attr("href");a(this).attr("href",decodeURIComponent(b))})},closeFilters:function(){this.filters.css("max-height",0).removeClass("filters-open"),this.showFilters.removeClass("show-filters-active")},clearFilters:function(){var a=window.location.href.slice(0,window.location.href.indexOf("?")+1),b=this.getUrlParams()[0];-1!=b.indexOf("#")&&(b=b.slice(0,b.indexOf("#"))),window.location.href=a+b},addListeners:function(){var a=this;this.showFilters.on("click",function(){a.openFilters()}),this.closeBtn.on("click",function(){a.closeFilters()}),this.clearBtn.on("click",function(){a.clearFilters()})},splitBottleSizesList:function(){this.bottleSizes.clone().insertBefore(this.ele.find(".filters-buttons")),this.col1=this.ele.find(".sizeDisplayValue:eq(0)"),this.col2=this.ele.find(".sizeDisplayValue:eq(1)");var b=Math.ceil(this.totalSizes/2);this.col1.find("li").slice(b).remove(),this.col2.find("li").slice(0,b).remove(),this.col2.find("h3").css("visibility","hidden"),this.isIE11===!0&&this.filters.find(".refinement a").each(function(){var b=a(this).attr("href"),c=decodeURIComponent(b);a(this).attr("href",c)})}},a.fn.productFilters=function(c){return this.each(function(){a(this).data().productFilter=new b(a(this),{})})}}(jQuery);