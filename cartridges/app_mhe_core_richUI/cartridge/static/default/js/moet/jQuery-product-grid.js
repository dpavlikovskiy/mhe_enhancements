!function(a){function b(b,c){this.ele=b,this.selector="ul.js-products",this.options=a.extend({},{},c),this.init()}b.prototype={initGlobals:function(){this.cont=document.querySelector(this.selector),this.container=a(this.selector),this.products=this.container.find(".products-tile-inner"),this.magnums=this.container.find(".products-tile-inner-magnum"),this.promos=a(".plp-promo").closest(".content-slot"),this.dpPromos=a(".dpSlot").closest(".content-slot"),this.tiles=a(".products-tile"),this.tooltips=this.products.find(".tooltip-content"),this.promoSlots={promo1:[6,7],promo2:[11,12],promo3:[14,15],promo4:[19,20],promo5:[22,23]},this.promoSlotsDP={promo1:[5,6],promo2:[7,8],promo3:[8,9],promo4:[9,10],promo5:[16,17],promo6:[18,19]},this.tileHeight=620,this.tileWidth=300,this.occupiedSlots=[]},getUrlParams:function(){return window.location.href.slice(window.location.href.indexOf("?")+1).split("&")},setupPackeryTiles:function(a){a||(a=this.tiles),a.addClass("items"),a.find(".products-tile-inner-magnum").closest(".products-tile").addClass("products-tile-magnum"),a.find(".products-tile-inner-gift").closest(".products-tile").addClass("products-tile-inner-gift")},setupPackeryPromos:function(){this.promos.addClass("items").appendTo(this.container),this.dpPromos.addClass("items").appendTo(this.container)},destroyPackery:function(){this.pckry.destroy()},packeryFirstPass:function(){this.pckry=new Packery(this.cont)},appendPackeryItems:function(a){this.pckry.appended(a)},packerySecondPass:function(){var b=this;this.promos.each(function(c){var d,e,f=b.promoSlots["promo"+(c+1)][0],g=b.promoSlots["promo"+(c+1)][1],h=a.inArray(f,b.occupiedSlots);d=1===h?g:f,e=Math.floor((d-1)/4);var i=e*b.tileHeight,j=(d-1)%4*b.tileWidth;b.pckry.fit(a(this)[0],j,i)}),this.dpPromos.each(function(c){var d,e,f=b.promoSlotsDP["promo"+(c+1)][0],g=b.promoSlotsDP["promo"+(c+1)][1],h=a.inArray(f,b.occupiedSlots);d=1===h?g:f,e=Math.floor((d-1)/4);var i=e*b.tileHeight,j=(d-1)%4*b.tileWidth;b.pckry.fit(a(this)[0],j,i)})},initMagnums:function(){var b=this,c=this.cont.querySelector(".products-tile-magnum");this.pckry.stamp(c),this.pckry.layout(),a(".products-tile-magnum").each(function(){var c=a(this).position().left/b.tileWidth,d=a(this).position().top/b.tileHeight,e=c+4*d+1,f=e+4;b.occupiedSlots.push(e,f)})},onePassPackery:function(){this.packeryFirstPass()},twoPassPackery:function(){this.packeryFirstPass(),this.initMagnums(),this.packerySecondPass()},setupTooltips:function(){this.tooltips.each(function(){var b=-2;a(this).css("left",0-a(this).width()/2+b+"px")})},init:function(){0===this.getUrlParams.length?(this.initGlobals(),this.setupPackeryTiles(this.tiles),this.setupPackeryPromos(),this.setupTooltips(),this.twoPassPackery()):a(window).trigger("hashchange")}},a.fn.productGrid=function(c){return this.each(function(){a(this).data().productGrid=new b(a(this),{})})}}(jQuery);